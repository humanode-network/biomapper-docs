---
description: >-
  proveUniqueness is the only unrestricted public function in the Biomapper
  contract that modifies the state.
---

import { Callout } from "nextra/components";

# proveUniqueness Call

## Arguments

```solidity
function proveUniqueness(
    uint8 ecdsaV,
    bytes32 ecdsaR,
    bytes32 ecdsaS,
    bytes32 biotoken
) external payable;
```

Arguments:

| name     | type    | desc                         |
| -------- | ------- | ---------------------------- |
| ecdsaV   | uint8   | 'v' field of ECDSA signature |
| ecdsaR   | bytes32 | 'r' field of ECDSA signature |
| ecdsaS   | bytes32 | 's' field of ECDSA signature |
| biotoken | bytes32 | The Biotoken                 |

No returned value.

## Events

When uniqueness is successfully proven, `NewBiomapping` event is emitted.

```solidity
event NewBiomapping(address account, bytes32 biotoken);
```

## Validation process

Several checks will be performed before any state changes are made. Each validation check will throw a specific error upon failure.

### Price

This function is `payable` and will validate that the amount of ETH sent matches the 'price' contract parameter.

To access the 'price' parameter, the `getPrice` function can be called.

```solidity
function getPrice() external view returns (uint256);
```

### Signature

EIP-712 structure will be formed, and the signature will be verified using the public key of the Signer server.

### Biomapping uniqueness

`proveUniqueness` function can throw 3 different errors:

- Biomapping already exists - if this exact biomapping is already registered;
- Account has another biotoken attached - if the address is already biomapped with another Biotoken;
- Biotoken already mapped to another account - if Biotoken already used with another account.

The 'Biomapping already exists' error will not be shown in the UI. Instead, it will indicate that everything is fine and the page can be closed, without actually submitting the transaction.

The 'Biotoken already mapped to another account' error will also be displayed in the UI showing the account address with which the provided Biotoken has been biomapped.

## Actions of `Biomapper` contract

The account address is stored as unique.

The Biotoken is stored as biomapped with the account address.

BiomapperLog contract is called.

An event is emitted.

## Actions of `BiomapperLog` contract

Upon receiving a `biomap` call from the `Biomapper` contract, `BiomapperLog` initializes a new `Biomapping` struct and adds it to the biomappings doubly linked list for a specified account address.
